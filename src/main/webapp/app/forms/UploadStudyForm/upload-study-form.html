<div class="container">
    <h1>Publication Upload Form</h1>
    <div class="form-group row">
        <label class="col-md-2 form-control-label">Search Publication by pubMedId:</label>
        <div class="col-md-4">
            <div class="input-group">
                <input class="form-control ng-pristine ng-valid ng-empty ng-touched" type="text" ww-enter="retrievePublicationByPubMedId()" ng-model="pubMedId" placeholder="Search" aria-invalid="false">
                <span id="basic-addon2" class="input-group-addon btn btn-primary" ng-click="retrievePublicationByPubMedId()" role="button" tabindex="0">Search</span>
            </div>
        </div>
        <div class="col-md-2">
            <a class="btn btn-success" ng-click="newPublication()">Create new Publication</a>
        </div>
    </div>
    <hr>
    <div ng-show="myHidingValue" class>
        <h3>Publication Details</h3>
        <div class="form-group row" ng-model="publi">
            <label class="col-md-2 form-control-label">PubMedId:</label>
            <div class="col-md-10">
                <input type="number" class="form-control ng-pristine ng-valid ng-not-empty ng-touched" name="pubMedIdForm" id="existingPublicationPubMedId" ng-model="publi.publication.pubMedId" readonly aria-invalid="false">
            </div>
        </div>
        <div class="form-group row" ng-model="publi">
            <label class="col-md-2 form-control-label">Title:</label>
            <div class="col-md-10">
                <input type="text" class="form-control ng-pristine ng-valid ng-not-empty ng-touched" name="pubTitleForm" id="existingPublicationTitle" ng-model="publi.publication.title" aria-invalid="false">
            </div>
        </div>
        <div class="form-group row" ng-model="publi">
            <label class="col-md-2 form-control-label">Authors:</label>
            <div class="col-md-10">
                <input type="text" class="form-control ng-pristine ng-valid ng-not-empty ng-touched" name="pubAuthorsForm" id="existingPublicationAuthors" ng-model="publi.publication.authors" aria-invalid="false">
            </div>
        </div>
        <div class="form-group row" ng-model="publi">
            <label class="col-md-2 form-control-label">Journal:</label>
            <div class="col-md-10">
                <input type="text" class="form-control ng-pristine ng-valid ng-not-empty ng-touched" name="pubJournalForm" id="existingPublicationJournal" ng-model="publi.publication.journal" aria-invalid="false">
            </div>
        </div>
        <div class="form-group row" ng-model="publi">
            <label class="col-md-2 form-control-label">Year Publish:</label>
            <div class="col-md-10">
                <input type="number" class="form-control ng-pristine ng-valid ng-not-empty ng-touched" name="pubYearPublishForm" id="existingPublicationYear" ng-model="publi.publication.yearPublish" aria-invalid="false">
            </div>
        </div>
        <hr>
        <h3>Study Details</h3>
        <div class="form-group row">
            <div class="col-md-2">
                <a class="btn btn-success" ng-click="newStudy()">
                    Add Study
                </a>
            </div>
        </div>
        <div class="well" ng-repeat="study in studies">
            <h4>Study {{$index+1}}:</h4>
            <div class="form-group row" ng-model="study">
                <label class="col-md-2 form-control-label">Study Ref:</label>
                <div class="col-md-10">
                    <input type="text" class="form-control ng-pristine ng-valid ng-not-empty ng-touched" name="StudyRefForm" id="existingPublicationStudyRef" ng-model="study.ref" readonly aria-invalid="false">
                </div>
            </div>
            <div class="form-group row" ng-model="study">
                <label class="col-md-2 form-control-label">Study Type:</label>
                <div class="col-md-10">
                    <input type="text" class="form-control ng-pristine ng-valid ng-not-empty ng-touched" name="StudyTypeForm" id="existingPublicationStudyType" ng-model="study.studyType" aria-invalid="false">
                </div>
            </div>
            <div class="form-group row">
                <label class="col-md-2 form-control-label">Publications:</label>
                <div class="col-md-10">
                    <input type="text" ng-repeat="publication in study.publicationss" class="form-control ng-pristine ng-valid ng-not-empty ng-touched" name="StudyPublicationsForm" id="existingPublicationStudyPublications" ng-model="publication.title" aria-invalid="false">
               </div>
            </div>
        </div>
        <hr>
        <h3>SiteData details</h3>
        <div class="form-group row">
            <div class="col-md-2">
                <a class="btn btn-success" ng-click="newSiteData()">
                    Add SiteData
                </a>
            </div>
        </div>
        <div class="well" ng-repeat="siteData in publi.siteDatas[0]">
            <h4>siteData {{$index+1}}:</h4>
           <div class="form-group row" ng-model="siteData">
               <label class="col-md-2 form-control-label">Category:</label>
                <div class="col-md-10">
                    <input type="text" class="form-control ng-pristine ng-valid ng-not-empty ng-touched" name="SiteDataCategoryForm" id="existingPublicationSDCategory" ng-model="siteData.category.name" aria-invalid="false">
                </div>
            </div>
            <div class="form-group row" ng-model="siteData">
                <label class="col-md-2 form-control-label">Country:</label>
                <div class="col-md-10">
                    <input type="text" class="form-control ng-pristine ng-valid ng-not-empty ng-touched" name="SiteDataCountryForm" id="existingPublicationSDCountry" ng-model="siteData.location.country" aria-invalid="false">
                </div>
            </div>
            <div class="form-group row" ng-model="siteData">
                <label class="col-md-2 form-control-label">Id:</label>
                <div class="col-md-10">
                    <input type="text" class="form-control ng-pristine ng-valid ng-not-empty ng-touched" name="SiteDataCountryForm" id="existingPublicatiodsfnSDCountry" ng-model="siteData.id" aria-invalid="false">
                </div>
            </div>
            <div class="form-group row" ng-model="siteData">
                <label class="col-md-2 form-control-label">Location:</label>
                <div class="col-md-10">
                    <input type="text" class="form-control ng-pristine ng-valid ng-not-empty ng-touched" name="SiteDataLocationForm" id="existingPublicationSDLocation" ng-model="siteData.location.location" aria-invalid="false">
                </div>
            </div>
            <div class="form-group row" ng-model="siteData">
                <label class="col-md-2 form-control-label">upper95CI:</label>
                <div class="col-md-10">
                    <input type="text" class="form-control ng-pristine ng-valid ng-not-empty ng-touched" name="SiteDataUpper95Form" id="existingPublicationSDUpper95" ng-model="siteData.upper95CI" aria-invalid="false">
                </div>
            </div>
            <div class="form-group row">
                <button ng-click="deleteSiteData(siteData)"
                        class="btn btn-danger btn-sm">
                     Remove SiteData
                </button>
                </a>
            </div>
            <hr>
            <h4>Treatments for siteData {{$index+1}}</h4>
            <div class="table-responsive">
                <table class="jh-table table table-striped">
                    <thead>
                    <tr jh-sort="vm.predicate" ascending="vm.reverse" callback="vm.transition()">
                        <th jh-sort-by="id"><span>Treatment Id</span> <span class="glyphicon glyphicon-sort"></span></th>
                        <th jh-sort-by="studyRef"><span>Treatment Name</span> <span class="glyphicon glyphicon-sort"></span></th>
                        <th jh-sort-by="country"><span>Treatment Arm Code</span> <span class="glyphicon glyphicon-sort"></span></th>
                        <th></th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="treatment in siteData.treatments track by treatment.id">
                        <td>{{treatment.id}}</td>
                        <td>{{treatment.treatmentName}}</td>
                        <td>{{treatment.treatmentArmCode}}</td>
                        <td class="text-right">
                            <div class="btn-group flex-btn-group-container">
                                <button type="submit"
                                        ui-sref="treatment.delete({id:treatment.id})"
                                        class="btn btn-danger btn-sm">
                                    <span class="glyphicon glyphicon-remove-circle"></span>
                                    <span class="hidden-xs hidden-sm"></span>
                                </button>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="form-group row">
                <div class="col-md-2">
                    <a class="btn btn-success" ng-click="newTreatment($index)">
                        Add Treatment
                    </a>
                </div>
            </div>
       </div>
        <div class="form-group row">
            <div class="col-md-2">
                <a class="btn btn-success" ng-click="saveAll()">
                    Save Publication
                </a>
            </div>
        </div>
    </div>
</div>
